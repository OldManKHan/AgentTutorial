# AI Agent 进阶教程

> 🚀 面向有基础的开发者，深入 Agent 核心技术

## 写在前面

欢迎来到 AI Agent 进阶教程！

如果你已经完成了[基础教程](../agent-tutorial/00-introduction.md)，了解了 Agent 的基本概念、工具系统和 Agent Loop，那么你已经具备了构建简单 Agent 的能力。但要构建**生产级**的 Agent 系统，你还需要掌握更多进阶技术。

这份进阶教程将带你深入 6 个核心方向：

- 如何在有限的上下文窗口中高效管理信息？
- 如何让多个 Agent 协作完成复杂任务？
- 如何设计安全、可扩展的工具系统？
- 如何让 Agent 真正"理解"代码？
- 如何为 Agent 添加长期记忆？
- 如何监控和调试 Agent 的行为？

---

## 与基础教程的关系

```
┌─────────────────────────────────────────────────────────────┐
│                    AI Agent 学习路径                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  基础教程 (2-3 周)                                          │
│  ├── Agent 是什么                                           │
│  ├── 工具系统 (Tools)                                       │
│  ├── Agent Loop 核心循环                                    │
│  ├── Prompt Engineering                                     │
│  ├── 高级主题概览                                           │
│  └── 实战项目                                               │
│           │                                                 │
│           ▼                                                 │
│  进阶教程 (3-4 周)  ← 你在这里                              │
│  ├── 上下文工程                                             │
│  ├── Multi-Agent 系统                                       │
│  ├── 工具系统设计                                           │
│  ├── 代码智能                                               │
│  ├── 记忆系统                                               │
│  └── 可观测性与调试                                         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**基础教程**帮你建立 Agent 的整体认知，**进阶教程**则深入每个技术方向的细节。两者是递进关系，建议先完成基础教程再学习本教程。

---

## 目标读者

本教程适合以下开发者：

| 前提条件 | 说明 |
|----------|------|
| ✅ 完成基础教程 | 理解 Agent、Tool Calling、Agent Loop 等概念 |
| ✅ TypeScript 能力 | 能够阅读和编写 TypeScript 代码 |
| ✅ LLM API 经验 | 用过 OpenAI/Claude/Gemini 等 API |
| ✅ 异步编程基础 | 理解 async/await、Promise |

**如果你还不具备这些条件**，建议先学习[基础教程](../agent-tutorial/00-introduction.md)。

---

## 6 模块概览


| 模块 | 核心问题 | 你将学到 |
|------|----------|----------|
| [上下文工程](./01-context-engineering.md) | 如何在有限窗口中管理信息？ | Token 优化、上下文压缩、Prompt Caching |
| [Multi-Agent 系统](./02-multi-agent.md) | 如何让多个 Agent 协作？ | 通信模式、任务分解、结果聚合 |
| [工具系统设计](./03-tool-system.md) | 如何设计安全可扩展的工具？ | 设计原则、MCP 协议、权限控制 |
| [代码智能](./04-code-intelligence.md) | 如何让 Agent 理解代码？ | LSP 协议、代码诊断、符号导航 |
| [记忆系统](./05-memory-system.md) | 如何为 Agent 添加记忆？ | 向量数据库、RAG、检索策略 |
| [可观测性](./06-observability.md) | 如何监控和调试 Agent？ | 链路追踪、日志设计、事件驱动 |

每个模块都包含：
- **理论讲解**：核心概念和设计思想
- **实践案例**：OpenCode 源码分析
- **动手实验**：小型练习巩固理解
- **实战项目**：独立项目深化应用

---

## 学习路线

```
┌─────────────────────────────────────────────────────────────┐
│                      推荐学习顺序                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Week 1: 基础进阶                                           │
│  ┌─────────────────┐    ┌─────────────────┐                │
│  │  上下文工程     │ ──▶│  工具系统设计   │                │
│  │  (3-5 天)       │    │  (3-5 天)       │                │
│  └─────────────────┘    └─────────────────┘                │
│                                                             │
│  Week 2: 架构进阶                                           │
│  ┌─────────────────┐    ┌─────────────────┐                │
│  │  Multi-Agent    │ ──▶│  代码智能       │                │
│  │  (3-5 天)       │    │  (3-5 天)       │                │
│  └─────────────────┘    └─────────────────┘                │
│                                                             │
│  Week 3-4: 高级主题                                         │
│  ┌─────────────────┐    ┌─────────────────┐                │
│  │  记忆系统       │ ──▶│  可观测性       │                │
│  │  (3-5 天)       │    │  (3-5 天)       │                │
│  └─────────────────┘    └─────────────────┘                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**灵活学习**：虽然推荐按顺序学习，但各模块相对独立。如果你对某个主题特别感兴趣，可以直接跳转学习。

---

## 预计时间

| 模块 | 理论学习 | 实践项目 | 总计 |
|------|----------|----------|------|
| 上下文工程 | 1-2 天 | 1-2 天 | 3-5 天 |
| Multi-Agent 系统 | 1-2 天 | 1-2 天 | 3-5 天 |
| 工具系统设计 | 1-2 天 | 1-2 天 | 3-5 天 |
| 代码智能 | 1-2 天 | 1-2 天 | 3-5 天 |
| 记忆系统 | 1-2 天 | 1-2 天 | 3-5 天 |
| 可观测性 | 1-2 天 | 1-2 天 | 3-5 天 |
| **总计** | **6-12 天** | **6-12 天** | **3-4 周** |

---

## 环境准备

本教程复用基础教程的环境配置。如果你已经完成基础教程，环境应该已经就绪。

### 快速检查

```bash
# 确认项目已克隆
cd opencode

# 确认在 dev 分支
git checkout dev
git pull

# 确认依赖已安装
bun install

# 确认可以启动
cd packages/opencode
bun dev
```

### API Key 配置

确保至少配置了一个 LLM API Key：

```bash
# Anthropic Claude (推荐)
export ANTHROPIC_API_KEY="your-api-key"

# 或 OpenAI
export OPENAI_API_KEY="your-api-key"

# 或 Google
export GOOGLE_GENERATIVE_AI_API_KEY="your-api-key"
```

---

## 如何使用这份教程

1. **理论先行**：每章先阅读理论部分，建立概念框架
2. **代码对照**：打开 OpenCode 源码，对照教程中的代码分析
3. **动手实验**：完成每章的小型实验，验证理解
4. **实战项目**：每章结束后完成实战项目，深化应用
5. **知识补充**：阅读推荐的论文和资源，拓展视野

---

## 目录

- [导言](./00-introduction.md) ← 你在这里
- [第一章：上下文工程](./01-context-engineering.md)
- [第二章：Multi-Agent 系统](./02-multi-agent.md)
- [第三章：工具系统设计](./03-tool-system.md)
- [第四章：代码智能](./04-code-intelligence.md)
- [第五章：记忆系统](./05-memory-system.md)
- [第六章：可观测性与调试](./06-observability.md)

---

准备好深入 Agent 的世界了吗？让我们开始吧！

[下一章：上下文工程 →](./01-context-engineering.md)
